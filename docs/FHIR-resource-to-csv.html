---

title: Lauren


keywords: fastai
sidebar: home_sidebar



nb_path: "FHIR-resource-to-csv.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: FHIR-resource-to-csv.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">smart_on_fhir_client_py_demo.core</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">fhirclient.models.medication</span> <span class="kn">import</span> <span class="n">Medication</span>
<span class="kn">from</span> <span class="nn">fhirclient.models.medicationadministration</span> <span class="kn">import</span> <span class="n">MedicationAdministration</span>
<span class="kn">from</span> <span class="nn">fhirclient.models.medicationdispense</span> <span class="kn">import</span> <span class="n">MedicationDispense</span>
<span class="kn">from</span> <span class="nn">fhirclient.models.medicationrequest</span> <span class="kn">import</span> <span class="n">MedicationRequest</span>
<span class="kn">from</span> <span class="nn">fhirclient.models.medicationstatement</span> <span class="kn">import</span> <span class="n">MedicationStatement</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;app_id&#39;</span><span class="p">:</span> <span class="s1">&#39;my_web_app&#39;</span><span class="p">,</span>
    <span class="s1">&#39;api_base&#39;</span><span class="p">:</span> <span class="s1">&#39;http://hapi.fhir.org/baseR4&#39;</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fhirclient</span> <span class="kn">import</span> <span class="n">client</span>
<span class="n">smart</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">FHIRClient</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">medication_request</span><span class="o">=</span><span class="n">MedicationRequest</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;2087020&#39;</span><span class="p">,</span> <span class="n">smart</span><span class="o">.</span><span class="n">server</span><span class="p">)</span>
<span class="n">print_resource</span><span class="p">(</span><span class="n">medication_request</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">pull_attr</span><span class="p">(</span><span class="n">resouce</span><span class="p">,</span><span class="n">attr_path</span><span class="p">):</span>
    <span class="n">r</span><span class="o">=</span><span class="n">resouce</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attr_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">a</span><span class="p">):</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">fmt</span><span class="p">(</span><span class="n">_r</span><span class="p">):</span> <span class="k">return</span> <span class="n">_r</span><span class="o">.</span><span class="n">as_json</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_r</span><span class="p">,</span><span class="s1">&#39;as_json&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">_r</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">fmt</span><span class="p">(</span><span class="n">_r</span><span class="p">)</span> <span class="k">for</span> <span class="n">_r</span> <span class="ow">in</span> <span class="n">r</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">fmt</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pull_attr</span><span class="p">(</span><span class="n">medication_request</span><span class="p">,</span><span class="s1">&#39;medicationCodeableConcept.coding&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">medication_request</span><span class="o">.</span><span class="n">as_json</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>MedicationRequest</code></p>
<ul>
<li>identifer</li>
<li>partOf</li>
<li>status</li>
<li>statusReason</li>
<li>category</li>
<li>medicationCodeableConcept/medicationReference</li>
<li>subject</li>
<li>encounter? MedicationRequest.context has been deleted</li>
<li>derive from dosageInstruction?</li>
<li>authoredOn</li>
<li>requester / reportedReference?</li>
<li>ref</li>
<li>reasonCode</li>
<li>reasonReference</li>
<li>dosageInstruction</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">attr_paths</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;resourceType&#39;</span><span class="p">,</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;meta&#39;</span><span class="p">,</span><span class="s1">&#39;identifier&#39;</span><span class="p">,</span><span class="s1">&#39;basedOn&#39;</span><span class="p">,</span><span class="s1">&#39;partOf&#39;</span><span class="p">,</span><span class="s1">&#39;status&#39;</span><span class="p">,</span><span class="s1">&#39;statusReason&#39;</span><span class="p">,</span>
            <span class="s1">&#39;intent&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">,</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span><span class="s1">&#39;doNotPerform&#39;</span><span class="p">,</span><span class="s1">&#39;reportedBoolean&#39;</span><span class="p">,</span><span class="s1">&#39;reportedReference&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationCodeableConcept&#39;</span><span class="p">,</span><span class="s1">&#39;medicationReference&#39;</span><span class="p">,</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span>
            <span class="s1">&#39;encounter&#39;</span><span class="p">,</span><span class="s1">&#39;supportingInformation&#39;</span><span class="p">,</span><span class="s1">&#39;authoredOn&#39;</span><span class="p">,</span><span class="s1">&#39;context&#39;</span><span class="p">,</span><span class="s1">&#39;requester&#39;</span><span class="p">,</span>
            <span class="s1">&#39;effectiveDateTime&#39;</span><span class="p">,</span><span class="s1">&#39;effectivePeriod&#39;</span><span class="p">,</span><span class="s1">&#39;performer&#39;</span><span class="p">,</span><span class="s1">&#39;performerType&#39;</span><span class="p">,</span>
            <span class="s1">&#39;recorder&#39;</span><span class="p">,</span><span class="s1">&#39;note&#39;</span><span class="p">,</span><span class="s1">&#39;dosage&#39;</span><span class="p">,</span><span class="s1">&#39;dosageInstruction&#39;</span><span class="p">,</span><span class="s1">&#39;dispenseRequest&#39;</span><span class="p">,</span>
            <span class="s1">&#39;substiution&#39;</span><span class="p">,</span><span class="s1">&#39;priorPrescription&#39;</span>
            <span class="s1">&#39;detectedIssue&#39;</span>
            <span class="s1">&#39;effectiveDateTime&#39;</span><span class="p">,</span><span class="s1">&#39;effectivePeriod&#39;</span><span class="p">,</span><span class="s1">&#39;dateAsserted&#39;</span><span class="p">,</span><span class="s1">&#39;InformationSource&#39;</span><span class="p">,</span><span class="s1">&#39;derivedFrom&#39;</span><span class="p">,</span><span class="s1">&#39;reasonCode&#39;</span><span class="p">,</span>
            <span class="s1">&#39;reasonReference&#39;</span><span class="p">,</span><span class="s1">&#39;request&#39;</span><span class="p">,</span><span class="s1">&#39;device&#39;</span><span class="p">,</span><span class="s1">&#39;note&#39;</span><span class="p">,</span><span class="s1">&#39;rateRatio&#39;</span><span class="p">,</span><span class="s1">&#39;rateQuantity&#39;</span><span class="p">,</span><span class="s1">&#39;eventHistory&#39;</span><span class="p">,</span>
            <span class="s1">&#39;reasonCode&#39;</span><span class="p">,</span><span class="s1">&#39;reasonReference&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">attr_path</span> <span class="ow">in</span> <span class="n">attr_paths</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">attr_path</span><span class="p">,</span><span class="n">pull_attr</span><span class="p">(</span><span class="n">medication_request</span><span class="p">,</span><span class="n">attr_path</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">attr_paths</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;resourceType&#39;</span><span class="p">,</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;meta&#39;</span><span class="p">,</span><span class="s1">&#39;identifier&#39;</span><span class="p">,</span><span class="s1">&#39;partOf&#39;</span><span class="p">,</span><span class="s1">&#39;status&#39;</span><span class="p">,</span><span class="s1">&#39;intent&#39;</span><span class="p">,</span><span class="s1">&#39;statusReason&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
           <span class="s1">&#39;medicationCodeableConcept&#39;</span><span class="p">,</span><span class="s1">&#39;medicationReference&#39;</span><span class="p">,</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span>
           <span class="s1">&#39;encounter&#39;</span><span class="p">,</span><span class="s1">&#39;authoredOn&#39;</span><span class="p">,</span><span class="s1">&#39;requester&#39;</span><span class="p">,</span><span class="s1">&#39;reasonCode&#39;</span><span class="p">,</span><span class="s1">&#39;reasonReference&#39;</span><span class="p">,</span>
           <span class="s1">&#39;dosageInstruction&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">attr_path</span> <span class="ow">in</span> <span class="n">attr_paths</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">attr_path</span><span class="p">,</span><span class="n">pull_attr</span><span class="p">(</span><span class="n">medication_request</span><span class="p">,</span><span class="n">attr_path</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">medication_request</span><span class="o">.</span><span class="n">as_json</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">attr_path</span> <span class="ow">in</span> <span class="n">attr_paths</span><span class="p">:</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">attr_path</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">pull_attr</span><span class="p">(</span><span class="n">medication_request</span><span class="p">,</span><span class="n">attr_path</span><span class="p">))])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
<span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_clipboard</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">medication_admin</span><span class="o">=</span><span class="n">MedicationAdministration</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;2086901&#39;</span><span class="p">,</span> <span class="n">smart</span><span class="o">.</span><span class="n">server</span><span class="p">)</span>
<span class="n">print_resource</span><span class="p">(</span><span class="n">medication_admin</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">attr_paths</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;identifier&#39;</span><span class="p">,</span><span class="s1">&#39;partOf&#39;</span><span class="p">,</span><span class="s1">&#39;status&#39;</span><span class="p">,</span><span class="s1">&#39;intent&#39;</span><span class="p">,</span><span class="s1">&#39;statusReason&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
           <span class="s1">&#39;medicationCodeableConcept&#39;</span><span class="p">,</span><span class="s1">&#39;medicationReference&#39;</span><span class="p">,</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span>
           <span class="s1">&#39;encounter&#39;</span><span class="p">,</span><span class="s1">&#39;authoredOn&#39;</span><span class="p">,</span><span class="s1">&#39;requester&#39;</span><span class="p">,</span><span class="s1">&#39;reasonCode&#39;</span><span class="p">,</span><span class="s1">&#39;reasonReference&#39;</span><span class="p">,</span>
           <span class="s1">&#39;dosageInstruction&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">medication_s</span><span class="o">=</span><span class="n">MedicationStatement</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;2086902&#39;</span><span class="p">,</span> <span class="n">smart</span><span class="o">.</span><span class="n">server</span><span class="p">)</span>
<span class="n">print_resource</span><span class="p">(</span><span class="n">medication_s</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">attr_paths</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;meta.versionId&#39;</span><span class="p">,</span><span class="s1">&#39;meta.lastUpdated&#39;</span><span class="p">,</span><span class="s1">&#39;meta.source&#39;</span><span class="p">,</span>
            <span class="s1">&#39;identifier.system&#39;</span><span class="p">,</span><span class="s1">&#39;identifier.value&#39;</span><span class="p">,</span>
            <span class="s1">&#39;basedOn&#39;</span><span class="p">,</span><span class="s1">&#39;partOf&#39;</span><span class="p">,</span><span class="s1">&#39;status&#39;</span><span class="p">,</span><span class="s1">&#39;statusReason&#39;</span><span class="p">,</span>
            <span class="s1">&#39;intent&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">,</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span><span class="s1">&#39;doNotPerform&#39;</span><span class="p">,</span><span class="s1">&#39;reportedBoolean&#39;</span><span class="p">,</span><span class="s1">&#39;reportedReference&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationCodeableConcept.coding.system&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationCodeableConcept.coding.code&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationCodeableConcept.coding.display&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationCodeableConcept.coding.text&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationCodeableConcept&#39;</span><span class="p">,</span>
            <span class="s1">&#39;medicationReference&#39;</span><span class="p">,</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span>
            <span class="s1">&#39;encounter&#39;</span><span class="p">,</span><span class="s1">&#39;supportingInformation&#39;</span><span class="p">,</span><span class="s1">&#39;authoredOn&#39;</span><span class="p">,</span><span class="s1">&#39;context&#39;</span><span class="p">,</span><span class="s1">&#39;requester&#39;</span><span class="p">,</span>
            <span class="s1">&#39;effectiveDateTime&#39;</span><span class="p">,</span><span class="s1">&#39;effectivePeriod&#39;</span><span class="p">,</span><span class="s1">&#39;performer&#39;</span><span class="p">,</span><span class="s1">&#39;performerType&#39;</span><span class="p">,</span>
            <span class="s1">&#39;recorder&#39;</span><span class="p">,</span><span class="s1">&#39;note&#39;</span><span class="p">,</span>
            <span class="n">dosage</span><span class="p">;</span><span class="n">patientInstruction</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">site</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">system</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">site</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">display</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">route</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">system</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">route</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">display</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">route</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">system</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">method</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">system</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">method</span><span class="p">;</span><span class="n">coding</span><span class="p">;</span><span class="n">display</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">dose</span><span class="p">;</span><span class="n">value</span>	<span class="n">dosage</span><span class="p">;</span><span class="n">dose</span><span class="p">;</span><span class="n">unit</span>

<span class="c1">#             &#39;dosage&#39;,</span>
            <span class="s1">&#39;dosageInstruction&#39;</span><span class="p">,</span><span class="s1">&#39;dispenseRequest&#39;</span><span class="p">,</span>
            <span class="s1">&#39;substiution&#39;</span><span class="p">,</span><span class="s1">&#39;priorPrescription&#39;</span>
            <span class="s1">&#39;detectedIssue&#39;</span>
            <span class="s1">&#39;effectiveDateTime&#39;</span><span class="p">,</span><span class="s1">&#39;effectivePeriod&#39;</span><span class="p">,</span><span class="s1">&#39;dateAsserted&#39;</span><span class="p">,</span><span class="s1">&#39;InformationSource&#39;</span><span class="p">,</span><span class="s1">&#39;derivedFrom&#39;</span><span class="p">,</span><span class="s1">&#39;reasonCode&#39;</span><span class="p">,</span>
            <span class="s1">&#39;reasonReference&#39;</span><span class="p">,</span><span class="s1">&#39;request&#39;</span><span class="p">,</span><span class="s1">&#39;device&#39;</span><span class="p">,</span><span class="s1">&#39;note&#39;</span><span class="p">,</span><span class="s1">&#39;rateRatio&#39;</span><span class="p">,</span><span class="s1">&#39;rateQuantity&#39;</span><span class="p">,</span><span class="s1">&#39;eventHistory&#39;</span><span class="p">,</span>
            <span class="s1">&#39;reasonCode&#39;</span><span class="p">,</span><span class="s1">&#39;reasonReference&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">attr_path</span> <span class="ow">in</span> <span class="p">[</span>
    <span class="s1">&#39;dosageInstruction&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dosage&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dosage.patientInstruction&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.site.coding.system&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.site.coding.display&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.route.coding.system&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dosage.route.coding.display&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.route.coding.system&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.method.coding.system&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dosage.method.coding.display&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.dose.value&#39;</span><span class="p">,</span><span class="s1">&#39;dosage.dose.unit&#39;</span>
<span class="p">]:</span>
    <span class="nb">print</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">pull_attr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="n">attr_path</span><span class="p">))</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#34;{&#39;dose&#39;: {&#39;unit&#39;: &#39;1&#39;, &#39;value&#39;: 0}, &#39;rateQuantity&#39;: {&#39;value&#39;: 0}, &#39;route&#39;: {&#39;coding&#39;: [{&#39;display&#39;: &#39;INH&#39;, &#39;system&#39;: &#39;urn:oid:&#39;}, {&#39;system&#39;: &#39;urn:oid:&#39;}]}, &#39;site&#39;: {&#39;coding&#39;: [{&#39;system&#39;: &#39;http://snomed.info/sct&#39;}]}}&#34;, &#34;[{&#39;patientInstruction&#39;: &#39;                    two puffs every four hours as needed&#39;, &#39;route&#39;: {&#39;coding&#39;: [{&#39;display&#39;: &#39;INH&#39;, &#39;system&#39;: &#39;urn:oid:&#39;}, {&#39;system&#39;: &#39;urn:oid:&#39;}]}}]&#34;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;None&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;0&#39;, &#39;None&#39;]
[&#39;None&#39;, &#39;1&#39;, &#39;None&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># IPython.display.HTML(resources[0].text.div)</span>
<span class="n">print_resource</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">2</span><span class="p">,</span><span class="mi">9999</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>MedicationRequest {
  &#34;id&#34;: &#34;2087020&#34;,
  &#34;meta&#34;: {
    &#34;lastUpdated&#34;: &#34;2021-05-11T12:51:16.534+00:00&#34;,
    &#34;source&#34;: &#34;#bl4SVWpGAkdLvNRm&#34;,
    &#34;versionId&#34;: &#34;1&#34;
  },
  &#34;identifier&#34;: [
    {
      &#34;system&#34;: &#34;https://kpininja.com/identifier&#34;,
      &#34;value&#34;: &#34;5119e94c-0a16-45b8-a555-0596d6cdc852&#34;
    }
  ],
  &#34;intent&#34;: &#34;filler-order&#34;,
  &#34;medicationCodeableConcept&#34;: {
    &#34;coding&#34;: [
      {
        &#34;code&#34;: &#34;630208&#34;,
        &#34;display&#34;: &#34;Albuterol 0.83 MG/ML Inhalant Solution&#34;,
        &#34;system&#34;: &#34;http://www.nlm.nih.gov/research/umls/rxnorm&#34;
      },
      {
        &#34;system&#34;: &#34;urn:oid:&#34;
      }
    ],
    &#34;text&#34;: &#34;Albuterol Sulfate (Albuterol Sulfate 2.5MG/3ML) 0.083 % Neb Neb, 2.5 Mg Neb&#34;
  },
  &#34;requester&#34;: {
    &#34;reference&#34;: &#34;Practitioner/2087019&#34;
  },
  &#34;status&#34;: &#34;unknown&#34;,
  &#34;subject&#34;: {
    &#34;reference&#34;: &#34;Patient/1995674&#34;
  },
  &#34;resourceType&#34;: &#34;MedicationRequest&#34;
}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">MedicationRequest</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;2087020&#39;</span><span class="p">,</span> <span class="n">smart</span><span class="o">.</span><span class="n">server</span><span class="p">),</span> <span class="c1"># 2087020 2087028</span>
           <span class="n">MedicationAdministration</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;2086901&#39;</span><span class="p">,</span> <span class="n">smart</span><span class="o">.</span><span class="n">server</span><span class="p">),</span> <span class="c1"># 2086901 2087029</span>
           <span class="n">MedicationStatement</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;2086902&#39;</span><span class="p">,</span> <span class="n">smart</span><span class="o">.</span><span class="n">server</span><span class="p">)</span>
          <span class="p">]</span>
<span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;resourceType&#39;</span><span class="p">:[</span><span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">]}</span>
<span class="k">for</span> <span class="n">attr_path</span> <span class="ow">in</span> <span class="n">attr_paths</span><span class="p">:</span>
    <span class="n">data</span><span class="p">[</span><span class="n">attr_path</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">pull_attr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="n">attr_path</span><span class="p">))</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>resourceType</th>
      <th>id</th>
      <th>meta.versionId</th>
      <th>meta.lastUpdated</th>
      <th>meta.source</th>
      <th>identifier.system</th>
      <th>identifier.value</th>
      <th>basedOn</th>
      <th>partOf</th>
      <th>status</th>
      <th>...</th>
      <th>dateAsserted</th>
      <th>InformationSource</th>
      <th>derivedFrom</th>
      <th>reasonCode</th>
      <th>reasonReference</th>
      <th>request</th>
      <th>device</th>
      <th>rateRatio</th>
      <th>rateQuantity</th>
      <th>eventHistory</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>MedicationRequest</td>
      <td>2087020</td>
      <td>1</td>
      <td>2021-05-11T12:51:16.534+00:00</td>
      <td>#bl4SVWpGAkdLvNRm</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>unknown</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>MedicationAdministration</td>
      <td>2086901</td>
      <td>3</td>
      <td>2021-05-18T17:03:24.627+00:00</td>
      <td>#0MrW1leKkNL2kOXT</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>completed</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>2</th>
      <td>MedicationStatement</td>
      <td>2086902</td>
      <td>2</td>
      <td>2021-05-12T05:13:47.341+00:00</td>
      <td>#srr2gVCndup0Cs4w</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>completed</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 50 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Pull-multiple-resources-as-JSON">Pull multiple resources as JSON<a class="anchor-link" href="#Pull-multiple-resources-as-JSON"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://hapi.fhir.org/baseR4/MedicationRequest?_include=MedicationRequest%3Asubject&amp;_pretty=true&amp;subject=1995674&amp;_format=json&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">jsonResponse</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">jsonResponse</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

